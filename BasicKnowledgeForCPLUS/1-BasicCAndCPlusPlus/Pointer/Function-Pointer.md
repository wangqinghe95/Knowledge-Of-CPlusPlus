# 函数指针


## 函数指针
### 概念：
+ 函数指针是指向函数的指针变量。函数指针可以像一般函数一样，用于调用函数，传递参数。

### 声明方式： 
+ `int (*pf)(const int&, const int&)` 
    - 声明了一个函数指针 pf，可以指向所有返回值是 int，函数参数是 const int& 的函数
+ `int *pf(const int&, const int&)` 
    - 声明了一个函数 pf，其返回值是 int* ，带有两个 const int& 参数；

### 目的
+ 希望在同一个函数通过使用相同的形参在不同的时间传入不同的实参产生不同的效果；

### 使用场景
+ 函数保存在虚拟内存中的代码段，函数名就是这块代码的入口，即也是这块代码的地址。通过设置函数指针的方式，可以更方便灵活的调用指定的函数。
1. 回调函数：
    - C 语言的 qsort 函数中对数组元素进行排序，该函数接受一个比较函数作为参数，在排序时进行比较
2. 函数参数化：
    - C 语言中，使用一个 process_array 的通用数组处理整形数组，该函数可以接受一个整型数组，一个数组大小，和一个指向处理元素的回调函数指针
3. 排序算法：
    - 通过传递不同的比较函数，在不同的排序算法中重用相同的代码
4. 线程池
    - 通过将要执行的函数以函数参数的形式传递给通用的线程池处理函数，这样线程池里的线程就可以延迟的处理任务了。

### 代码

```
#include<cstdio>

int Max(int a, int b){
    return a > b ? a : b;
}

int Min(int a, int b){
    return a < b ? a : b;
}

int (*fp)(int, int);

int main(){
    fp = Max;
    int c = (*fp)(1,2);
    printf("c = %d\n", c);

    fp = Min;
    int d = (*fp)(3,4);
    printf("d = %d\n", d);

    return 0;
}
```

## 回调函数
### 定义
+ 回调函数就是通过函数指针调用的函数。

## 作用
+ 回调函数的特点是跳出正常的程序执行顺序，作用就是为了分离代码，降低程序的耦合性。（在面向对象的模型中）

## 应用场景
1. 事件处理
    + 单机按钮或者加载网页时处理的事件
2. 异步编程
    + 在读取文件或者从服务器获取数据时
3. 定时器
    + 在一定时间后执行某个事件
4. 用户界面
    + 用户点击按钮或者选择菜单时执行某个操作

## C++ std::function