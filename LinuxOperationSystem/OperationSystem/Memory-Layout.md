# 内存布局

## C++ 程序在计算机中的内存布局
+ C++ 程序在计算机内存中的布局是由操作系统统一管理的。操作系统中，内存地址从低往高处依次存储的是
    - 代码段、文本段、数据段、未初始化数据段、堆区、栈区、环境变量/命令行参数、系统内核
+ 代码段（Code segment）
    - 又叫文本段，包含已经编译的机器码指令。
    - 进程启动时初始化，可以执行且只读
+ 文本段（Literals segments）
    - 字面池量，也就是字符串字面量
    - 进程启动时初始化，不可执行，只读
+ 数据段（Data segment）
    - 程序已初始化的常量以及全局变量，静态变量。该区域变量对全局可见。
    - 进程启动时，就初始化，不可执行切可以修改
+ 堆区（heap）
    - 空闲内存区，用于动态分配。
    - 该区域是高地址增长，C 的 malloc/free, C++ 的 new/delete
    - 由程序员管理，不可执行可以修改
+ 栈区（Stack）
    - 用于存储局部变量和函数参数，以及函数调用结束后返回的调用处的下一行要执行的指令。栈向低地址增长
    - 由操作系统自己管理，不可执行且可修改
+ 环境变量/命令行参数
    - 操作系统环境变量，命令行参数
+ 系统内核（OS kernel）
    - 操作系统内核

## C++ 类在内存中的布局
+ 类在内存中的大小只和成员变量有关，和成员函数，静态成员变量都无关
    + 成员函数保持在代码区，静态成员变量保存在数据区
    + 类成员变量按照声明的顺序在内存中有序排布，且遵循内存对齐
+ 类的首地址就是类第一个声明的成员变量地址，如果含虚函数的话，对象地址就是是虚函数指针地址